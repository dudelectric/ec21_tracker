(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[52],{1167:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return c});var r=n(68),i=n(0),a=n.n(i),o=Object(i.createContext)({}),c=function(e){var t=e.children,n=Object(i.useState)({}),c=Object(r.a)(n,2),u=c[0],d=c[1];return a.a.createElement(o.Provider,{value:{isUpdateChatList:u,setUpdatedChatList:d}},t)}},1168:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return c});var r=n(68),i=n(0),a=n.n(i),o=Object(i.createContext)({}),c=function(e){var t=e.children,n=Object(i.useState)(null),c=Object(r.a)(n,2),u=c[0],d=c[1];return a.a.createElement(o.Provider,{value:{sendingItem:u,setSendingItem:d}},t)}},1248:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}n.d(t,"a",function(){return r})},1861:function(e,t){e.exports="https://ecs7.tokopedia.net/assets-tokopedia-lite/v2/zeus/production/57d0f05a.svg"},1862:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"NotificationQuery"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"notifications"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"chat"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"unreads"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"unreadsSeller"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"unreadsUser"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:79}};n.loc.source={body:"query NotificationQuery{notifications{chat{unreads unreadsSeller unreadsUser}}}",name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};function i(e,t){for(var n=0;n<e.definitions.length;n++){var r=e.definitions[n];if(r.name&&r.name.value==t)return r}}n.definitions.forEach(function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var r=t.type;"NamedType"===r.kind&&n.add(r.name.value)}t.selectionSet&&t.selectionSet.selections.forEach(function(t){e(t,n)}),t.variableDefinitions&&t.variableDefinitions.forEach(function(t){e(t,n)}),t.definitions&&t.definitions.forEach(function(t){e(t,n)})}(e,t),r[e.name.value]=t}}),e.exports=n,e.exports.NotificationQuery=function(e,t){var n={kind:e.kind,definitions:[i(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var a=r[t]||new Set,o=new Set,c=new Set;for(a.forEach(function(e){c.add(e)});c.size>0;){var u=c;c=new Set,u.forEach(function(e){o.has(e)||(o.add(e),(r[e]||new Set).forEach(function(e){c.add(e)}))})}return o.forEach(function(t){var r=i(e,t);r&&n.definitions.push(r)}),n}(n,"NotificationQuery")},1863:function(e,t,n){"use strict";var r=n(0),i=n.n(r),a=n(9),o=Object(a.a)({chunkName:function(){return"chat-widget-view"},isReady:function(e){return!!n.m[this.resolve(e)]},requireAsync:function(){return Promise.all([n.e(0),n.e(1),n.e(138),n.e(54)]).then(n.bind(null,1398))},requireSync:function e(t){var r=this.resolve(t);return n(r)},resolve:function e(){return 1398}},{ssr:!1});t.a=function(e){return i.a.createElement(o,e)}},483:function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return l});var r=n(551),i=n(1248),a=n(0),o=n.n(a),c=n(484);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){Object(r.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var s=Object(a.createContext)({}),l=function(e){var t=e.attachedData,n=e.bottom,r=e.children,a=e.lang,u=e.onShowToaster,l=e.serviceHostname,f=e.type,p=e.userId,m=e.webSocketUrl,b=Object(i.a)(e,["attachedData","bottom","children","lang","onShowToaster","serviceHostname","type","userId","webSocketUrl"]),h=t||{},v=n||40,g=a||"id",O=null!=u?u:function(){},y=p||-1,x=[c.v,c.w].includes(f||"")?f:c.v,j=f===c.w,S=f===c.v;return o.a.createElement(s.Provider,{value:d({attachedData:h,bottom:v,children:r,isTypeBuyer:S,isTypeSeller:j,lang:g,onShowToaster:O,serviceHostname:l,type:x,userId:y,webSocketUrl:m},b)},r)}},484:function(e,t,n){"use strict";n.d(t,"n",function(){return r}),n.d(t,"o",function(){return i}),n.d(t,"p",function(){return a}),n.d(t,"q",function(){return o}),n.d(t,"r",function(){return c}),n.d(t,"s",function(){return u}),n.d(t,"l",function(){return d}),n.d(t,"m",function(){return s}),n.d(t,"A",function(){return l}),n.d(t,"h",function(){return f}),n.d(t,"f",function(){return p}),n.d(t,"j",function(){return m}),n.d(t,"i",function(){return b}),n.d(t,"g",function(){return h}),n.d(t,"k",function(){return v}),n.d(t,"z",function(){return g}),n.d(t,"x",function(){return O}),n.d(t,"y",function(){return y}),n.d(t,"P",function(){return x}),n.d(t,"Q",function(){return j}),n.d(t,"T",function(){return S}),n.d(t,"S",function(){return w}),n.d(t,"R",function(){return k}),n.d(t,"a",function(){return E}),n.d(t,"D",function(){return C}),n.d(t,"C",function(){return D}),n.d(t,"K",function(){return P}),n.d(t,"N",function(){return I}),n.d(t,"M",function(){return N}),n.d(t,"L",function(){return L}),n.d(t,"B",function(){return A}),n.d(t,"b",function(){return U}),n.d(t,"e",function(){return _}),n.d(t,"c",function(){return T}),n.d(t,"d",function(){return F}),n.d(t,"E",function(){return q}),n.d(t,"I",function(){return z}),n.d(t,"J",function(){return H}),n.d(t,"F",function(){return M}),n.d(t,"H",function(){return Q}),n.d(t,"G",function(){return W}),n.d(t,"v",function(){return G}),n.d(t,"w",function(){return R}),n.d(t,"O",function(){return B}),n.d(t,"u",function(){return J}),n.d(t,"t",function(){return K});var r="AttachInvoice",i="AttachProduct",a="AttachVoucher",o="ChatSetting",c="DeleteChat",u="ReportUser",d="1",s="2",l=3,f=1,p=2,m=3,b=4,h=7,v=11,g=1,O=[0,2,3,10],y=24,x=2,j=0,S=1,w=2,k=3,E=["jpg","jpeg","png","JPG","JPEG","PNG"],C=1,D=2,P=[0,3],I=1,N=4,L=24,A=1,U=1,_=2,T=3,F=4,q=103,z=203,H=204,M=301,Q=800,W=999,G="buyer",R="seller",B="https://www.tokopedia.com",J=1,K=0},551:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return r})},559:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return c});var r=n(68),i=n(0),a=n.n(i),o=Object(i.createContext)({}),c=function(e){var t=e.children,n=e.messageId,c=Object(i.useState)(n||0),u=Object(r.a)(c,2),d=u[0],s=u[1],l=Object(i.useState)(-1),f=Object(r.a)(l,2),p={messageId:d,setMessageId:s,deleteChatId:f[0],setDeleteChatId:f[1]};return a.a.createElement(o.Provider,{value:p},t)}},560:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return c});var r=n(68),i=n(0),a=n.n(i),o=Object(i.createContext)({}),c=function(e){var t=e.children,n=e.attachedItems,c=Object(i.useState)(n||[]),u=Object(r.a)(c,2),d=u[0],s=u[1];return a.a.createElement(o.Provider,{value:{attachedItems:d,setAttachedItems:s}},t)}},612:function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return l});var r=n(68),i=n(0),a=n.n(i),o=n(2),c=n(46),u=n.n(c),d=Object(o.css)("overflow:hidden;"),s=Object(i.createContext)({}),l=function(e){var t=e.children,n=e.modalContent,o=e.displayModal,c=Object(i.useState)(null!=o&&o),l=Object(r.a)(c,2),f=l[0],p=l[1],m=Object(i.useState)(n||""),b=Object(r.a)(m,2),h=b[0],v=b[1];return Object(i.useEffect)(function(){return function(){document.body.classList.remove(d)}},[]),a.a.createElement(s.Provider,{value:{handleOpenModal:function(e){v(e),p(!0),u.a&&document.body.classList.add(d)},handleCloseModal:function(){p(!1),u.a&&document.body.classList.remove(d)},modalContent:h,displayModal:f}},t)}},763:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),a=n(1),o=n(72),c=n(559),u=n(1167),d=n(560),s=n(1168),l=n(483),f=n(612),p=n(68),m=n(13),b=n(32),h=n(1861),v=n.n(h),g=n(106),O=n(1862),y=n.n(O),x=n(2),j=n(3),S=function(e,t){return Object(x.css)("position:fixed;right:6%;bottom:0;height:auto;padding:6px 20px;box-shadow:0 2px 6px 0 ",j.m,";color:",j.i,";border-radius:20px;font-size:16px;z-index:100;transition:all ease-in-out 0.2s;transform:translateY(",e?"20px":"-".concat(t,"px"),");opacity:",e?"0":"1",";span{display:flex;align-items:center;}.chatImgWrapper{position:relative;height:30px;}.chatImg{position:relative;left:0;top:0;width:28px;height:auto;transform:translateY(0);margin-right:8px;margin-bottom:2px;}.chatUnreadsCounter{position:absolute;border:solid 2px ",j.k,";background-color:",j.A,";color:",j.k,";top:-1px;right:1px;border-radius:18px;text-align:center;font-style:initial;font-size:8px;line-height:9px;font-weight:700;padding:2px 4px;}")},w=function(e,t,n){return Object(x.css)("max-height:calc(100vh - 233px);height:450px;width:560px;display:",t?"flex":"none",";position:fixed;right:6%;bottom:0;background-color:",j.k,";border-radius:12px;box-shadow:0 2px 30px 0 ",j.m,";z-index:",e?"99":"-1",";transition:all ease-in-out 0.2s;transform:translateY(",e?"-".concat(n,"px"):"0px",");opacity:",e?"1":"0",";font-family:Nunito Sans,Open Sans,Tahoma !important;a,p,span,li{font-family:Open Sans,Tahoma !important;}.leftSide{width:30%;display:flex;flex-direction:column;}.rightSide{width:70%;border-left:1px solid ",j.u,";}")},k=n(1863),E=function(){var e,t,n,a,o=Object(r.useContext)(l.a),c=o.bottom,u=o.attachedData,d=o.isTypeSeller,s=Object(r.useContext)(g.a),f=s.isDisplayedWidget,h=s.showChatWidget,O=s.isDisplayedWidgetDOM,x=s.closeChatWidget,j=Object(r.useState)(!0),E=Object(p.a)(j,2),C=E[0],D=E[1],P=Object(m.d)(y.a,{fetchPolicy:"network-only"}).data,I=(null==P?void 0:null===(e=P.notifications)||void 0===e?void 0:null===(t=e.chat)||void 0===t?void 0:t.unreads)||0,N=(null==P?void 0:null===(n=P.notifications)||void 0===n?void 0:null===(a=n.chat)||void 0===a?void 0:a.unreadsSeller)||0,L=d?N:I,A=Object(r.useCallback)(function(){var e,t,n,r,i=(null==u?void 0:u.page)||"";e="clickInboxChat",t="inbox-chat",n="click on chat button",r="chat widget - ".concat(i),window.dataLayer&&window.dataLayer.push({event:e,eventCategory:t,eventAction:n,eventLabel:r}),h&&h(u)},[u,h]);return Object(r.useEffect)(function(){O&&C&&D(!1)},[C,D,O]),Object(r.useEffect)(function(){return function(){x&&x()}},[x]),i.a.createElement(i.a.Fragment,null,i.a.createElement(b.default,{className:S(f,c),onClick:A,filled:!0},i.a.createElement("div",{className:"chatImgWrapper","data-testid":"btnChatFloating"},i.a.createElement("img",{className:"chatImg",src:v.a,alt:"Chat"}),L>0&&i.a.createElement("span",{className:"chatUnreadsCounter"},L))," ","Chat"),C?null:i.a.createElement("div",{className:w(f,O,c)},i.a.createElement(k.a,{notificationData:P,totalChatUnreads:L})))},C={serviceHostname:a.string.isRequired,userId:a.number,webSocketUrl:a.string.isRequired},D=function(e){var t=e.userId;return(void 0===t?0:t)>0?i.a.createElement(o.a,{source:"pluggables_chat_widget",render:function(){return null}},i.a.createElement(l.b,e,i.a.createElement(c.b,null,i.a.createElement(u.b,null,i.a.createElement(d.b,null,i.a.createElement(s.b,null,i.a.createElement(f.b,null,i.a.createElement(E,null)))))))):null};D.propTypes=C,D.defaultProps={userId:0};t.default=D}}]);
//# sourceMappingURL=https://s3.ap-southeast-1.amazonaws.com/sources-maps/tkpd-web/tokopedia-lite/v2/zeus/production/chat-widget-button.510c91e8c4e373aa8862852e7d7e602f.js.map